{
  "id": 3214109515,
  "node_id": "PR_kwDOPJEskc6eB6ir",
  "number": 44,
  "title": "feat: GitHub Pages対応の静的サイト生成とAPI統合の実装 (Issue #40)",
  "body": "## 概要\n\nGitHub Pages デプロイメントに対応した静的サイト生成でのGitHub データ統合システムを実装しました。動的APIコールではなく、ビルド時にデータを取得してJSONファイルとして保存し、Astroページで読み込む方式を採用しています。\n\n## 変更内容\n\n### 🚀 データ取得・管理システム\n- **GitHub API データ取得スクリプト** (`scripts/fetch-github-data.ts`)\n  - 環境変数検証、エラーハンドリング、統計情報生成\n  - Zod スキーマによる型安全なデータ処理\n  - CI環境での graceful fallback 対応\n- **静的データ読み込み機能** (`src/lib/data/github.ts`)\n  - 型安全なJSONデータ読み込み\n  - フォールバック機能とエラーハンドリング\n- **静的JSONファイル保存** (`src/data/github/`)\n  - `issues.json` - 全Issue データ\n  - `metadata.json` - 統計情報とメタデータ\n  - `issues/` - 個別Issue ファイル\n\n### 🎨 Astro ページ統合\n- **Issues一覧ページ** (`src/pages/issues/index.astro`)\n  - 静的データを使用したリスト表示\n  - ラベル集計とフィルタリング対応\n  - 統計情報の表示\n- **Issue詳細ページ** (`src/pages/issues/[id].astro`)\n  - 動的ルーティングでの個別表示\n  - `getStaticPaths` での静的パス生成\n  - マークダウン処理（簡易版）\n\n### ⚙️ 自動化・デプロイシステム\n- **ビルドプロセス統合**\n  - `prebuild` フックでの自動データ取得\n  - `tsx` 依存関係の追加\n  - 環境変数なしでの安全なビルド\n- **GitHub Actions ワークフロー** (`.github/workflows/update-data.yml`)\n  - 毎日午前6時（JST）の定期実行\n  - 手動実行とPush時の自動実行\n  - GitHub Pages への自動デプロイ\n\n### 📚 環境設定・ドキュメント\n- **環境変数設定** (`.env.example`)\n  - GitHub Token 設定の詳細説明\n  - 必要な権限の明記\n- **セットアップガイド** (`docs/setup-guide.md`)\n  - 詳細なセットアップ手順\n  - トークン取得方法\n  - トラブルシューティング\n\n## 🔧 修正内容 (最新)\n\n### ビルドエラー修正\n- `fetchGitHubIssues` 関数の存在しない import エラーを修正\n- `GitHubIssuesService` を使用する正しい API 統合に変更\n- 環境変数不備時の graceful fallback を実装\n\n### CI対応\n- 環境変数なしでもビルドが成功するよう改善\n- スキーマ検証エラーの適切なハンドリング\n- CI環境での安全なビルドプロセス確立\n\n## テスト\n\n- `make quality` - 全品質チェック通過\n- 型チェック: エラー 0件\n- テスト: 186テスト成功\n- リント: 警告16件（既存のnon-null assertion、影響なし）\n\n## 使用方法\n\n```bash\n# データ取得\nnpm run fetch-data\n\n# 開発サーバー\nnpm run dev\n\n# 本番ビルド（データ取得含む）\nnpm run build:full\n```\n\n## 動作確認\n\n1. 環境変数を設定（`.env.example` を参考）\n2. `npm run fetch-data` でデータ取得\n3. `npm run dev` で開発サーバー起動\n4. `/issues` ページで静的データが表示されることを確認\n\n静的サイト生成によるGitHub Pages デプロイメントに完全対応し、定期的なデータ更新も自動化されました。\n\nCloses #40",
  "user": {
    "login": "nyasuto",
    "id": 17446383,
    "node_id": "MDQ6VXNlcjE3NDQ2Mzgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/17446383?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nyasuto",
    "html_url": "https://github.com/nyasuto",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-07-09T00:45:21Z",
  "updated_at": "2025-07-09T01:22:41Z",
  "closed_at": "2025-07-09T01:22:39Z",
  "author_association": "OWNER",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/nyasuto/beaver/pulls/44",
    "html_url": "https://github.com/nyasuto/beaver/pull/44",
    "diff_url": "https://github.com/nyasuto/beaver/pull/44.diff",
    "patch_url": "https://github.com/nyasuto/beaver/pull/44.patch"
  },
  "html_url": "https://github.com/nyasuto/beaver/pull/44",
  "url": "https://api.github.com/repos/nyasuto/beaver/issues/44",
  "repository_url": "https://api.github.com/repos/nyasuto/beaver",
  "labels_url": "https://api.github.com/repos/nyasuto/beaver/issues/44/labels{/name}",
  "comments_url": "https://api.github.com/repos/nyasuto/beaver/issues/44/comments",
  "events_url": "https://api.github.com/repos/nyasuto/beaver/issues/44/events"
}