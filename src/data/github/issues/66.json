{
  "id": 3215531951,
  "node_id": "PR_kwDOPJEskc6eGpuu",
  "number": 66,
  "title": "feat: scriptsフォルダのユニットテスト実装",
  "body": "## 概要\n\nscriptsフォルダのユニットテストを実装しました。GitHub APIアクセス部分は完全にモック化されており、実際のネットワーク呼び出しを回避しています。\n\n## 変更内容\n\n### 新規追加\n- `scripts/__tests__/fetch-github-data.test.ts` - fetch-github-dataスクリプトの包括的なユニットテスト\n- `vitest.config.ts` - scriptsフォルダのテストファイルを含むように設定更新\n\n### テスト対象機能\n- 環境変数検証（必須項目チェック、エラーメッセージ表示）\n- ディレクトリ作成処理（存在チェック、作成処理）\n- GitHub API呼び出し（クライアント作成、Issues取得）\n- データ保存（JSONファイル保存、個別Issue保存、メタデータ生成）\n- エラーハンドリング（APIエラー、ファイルエラー、スタックトレース）\n\n### モック化対応\n- `createGitHubClient` - GitHub API クライアント作成\n- `GitHubIssuesService` - Issues取得サービス\n- Node.js `fs` モジュール - ファイル操作\n- `console` メソッド - ログ出力\n- `process.exit` - プロセス終了\n\n## テスト\n\n- **15件のテストケース**をすべて成功\n- **GitHub API呼び出しを完全にモック化**し、実際のネットワーク呼び出しを回避\n- **型安全性を維持**しながら包括的なテストカバレッジを実現\n- **エラーケースを含む**完全なテストスイート\n\n```bash\nnpm test -- scripts/__tests__/fetch-github-data.test.ts\n```\n\n実行結果：\n```\n✓ scripts/__tests__/fetch-github-data.test.ts (15 tests) \n  ✓ 環境変数の検証 (3 tests)\n  ✓ ディレクトリ作成 (2 tests)  \n  ✓ GitHub API 呼び出し (3 tests)\n  ✓ データ保存 (5 tests)\n  ✓ エラーハンドリング (2 tests)\n```\n\n🤖 Generated with [Claude Code](https://claude.ai/code)",
  "user": {
    "login": "nyasuto",
    "id": 17446383,
    "node_id": "MDQ6VXNlcjE3NDQ2Mzgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/17446383?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nyasuto",
    "html_url": "https://github.com/nyasuto",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-07-09T11:06:16Z",
  "updated_at": "2025-07-09T11:09:46Z",
  "closed_at": "2025-07-09T11:09:44Z",
  "author_association": "OWNER",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/nyasuto/beaver/pulls/66",
    "html_url": "https://github.com/nyasuto/beaver/pull/66",
    "diff_url": "https://github.com/nyasuto/beaver/pull/66.diff",
    "patch_url": "https://github.com/nyasuto/beaver/pull/66.patch"
  },
  "html_url": "https://github.com/nyasuto/beaver/pull/66",
  "url": "https://api.github.com/repos/nyasuto/beaver/issues/66",
  "repository_url": "https://api.github.com/repos/nyasuto/beaver",
  "labels_url": "https://api.github.com/repos/nyasuto/beaver/issues/66/labels{/name}",
  "comments_url": "https://api.github.com/repos/nyasuto/beaver/issues/66/comments",
  "events_url": "https://api.github.com/repos/nyasuto/beaver/issues/66/events"
}