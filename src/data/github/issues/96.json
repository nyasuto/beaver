{
  "id": 3217450949,
  "node_id": "I_kwDOPJEskc6_xmfF",
  "number": 96,
  "title": "ğŸ”¥ CRITICAL: StatsServiceã®åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆå®Ÿè£…",
  "body": "## ğŸ¯ æ¦‚è¦\n\n**StatsService.ts** ã¯çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®çµ±åˆå‡¦ç†ã‚’æ‹…ã†æœ€é‡è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ãŒã€ç¾åœ¨ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒ¼ã‚¸ãŒ **0%** ã§ã™ã€‚ã‚·ã‚¹ãƒ†ãƒ ã®ä¿¡é ¼æ€§ç¢ºä¿ã®ãŸã‚ã€ç·Šæ€¥ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n\n## ğŸ“Š ç¾çŠ¶\n\n- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒ¼ã‚¸**: 0%\n- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/lib/services/StatsService.ts`\n- **é‡è¦åº¦**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®çµ±è¨ˆæ©Ÿèƒ½ã®ä¸­æ ¸\n\n## ğŸ”§ å®Ÿè£…ãŒå¿…è¦ãªãƒ†ã‚¹ãƒˆ\n\n### ã‚³ã‚¢æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ\n- [ ] `getUnifiedStats()` - çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®çµ±åˆå‡¦ç†\n- [ ] `fetchFreshStats()` - API ãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯\n- [ ] `calculateStats()` - çµ±è¨ˆè¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³\n- [ ] `calculatePriorityStats()` - å„ªå…ˆåº¦åˆ†é¡ãƒ­ã‚¸ãƒƒã‚¯\n- [ ] `calculateLabelStats()` - ãƒ©ãƒ™ãƒ«çµ±è¨ˆé›†è¨ˆ\n- [ ] `getFallbackStats()` - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ\n\n### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ\n- [ ] `getCachedStats()` - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿å–å¾—\n- [ ] `setCachedStats()` - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ãƒ¼ã‚¿ä¿å­˜\n- [ ] `clearCache()` - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢\n- [ ] `cleanupExpiredCache()` - æœŸé™åˆ‡ã‚Œã‚­ãƒ£ãƒƒã‚·ãƒ¥å‰Šé™¤\n\n### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ\n- [ ] `generateCacheKey()` - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚­ãƒ¼ç”Ÿæˆ\n- [ ] `extractPriorityFromLabels()` - ãƒ©ãƒ™ãƒ«ã‹ã‚‰å„ªå…ˆåº¦æŠ½å‡º\n\n## ğŸ§ª ãƒ†ã‚¹ãƒˆè¦ä»¶\n\n### 1. ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ†ã‚¹ãƒˆ\n```typescript\ndescribe('StatsService Singleton', () => {\n  it('should return same instance', () => {\n    const instance1 = StatsService.getInstance();\n    const instance2 = StatsService.getInstance();\n    expect(instance1).toBe(instance2);\n  });\n});\n```\n\n### 2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ\n```typescript\ndescribe('Cache Management', () => {\n  it('should cache and retrieve stats', () => {\n    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜ãƒ»å–å¾—ãƒ»TTLæœŸé™ã®ãƒ†ã‚¹ãƒˆ\n  });\n  \n  it('should handle cache expiration', () => {\n    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æœŸé™ã®ãƒ†ã‚¹ãƒˆ\n  });\n});\n```\n\n### 3. ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ\n```typescript\ndescribe('Data Source Fallback', () => {\n  it('should fallback from API to static to fallback', () => {\n    // API â†’ é™çš„ãƒ‡ãƒ¼ã‚¿ â†’ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®é †åºãƒ†ã‚¹ãƒˆ\n  });\n});\n```\n\n### 4. çµ±è¨ˆè¨ˆç®—ãƒ†ã‚¹ãƒˆ\n```typescript\ndescribe('Statistics Calculation', () => {\n  it('should calculate correct statistics', () => {\n    // çµ±è¨ˆè¨ˆç®—ã®æ­£ç¢ºæ€§ãƒ†ã‚¹ãƒˆ\n  });\n  \n  it('should handle empty data', () => {\n    // ç©ºãƒ‡ãƒ¼ã‚¿æ™‚ã®å‹•ä½œãƒ†ã‚¹ãƒˆ\n  });\n});\n```\n\n## ğŸ¯ ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒ¼ã‚¸ç›®æ¨™\n\n- **Statement Coverage**: 95%+\n- **Branch Coverage**: 90%+\n- **Function Coverage**: 100%\n\n## ğŸ“ å®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ\n\n### ãƒ¢ãƒƒã‚¯ãŒå¿…è¦ãªå¤–éƒ¨ä¾å­˜\n- `getIssuesWithFallback()` - é™çš„ãƒ‡ãƒ¼ã‚¿å–å¾—\n- `hasStaticData()` - ãƒ‡ãƒ¼ã‚¿å­˜åœ¨ç¢ºèª\n- `fetch()` - APIå‘¼ã³å‡ºã—\n- `Date.now()` - ã‚­ãƒ£ãƒƒã‚·ãƒ¥TTLè¨ˆç®—\n\n### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™\n- ã‚µãƒ³ãƒ—ãƒ«Issueãƒ‡ãƒ¼ã‚¿ï¼ˆæ§˜ã€…ãªå„ªå…ˆåº¦ãƒ»ãƒ©ãƒ™ãƒ«ï¼‰\n- ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿\n- ç©ºãƒ‡ãƒ¼ã‚¿ãƒ»ä¸æ­£ãƒ‡ãƒ¼ã‚¿\n\n## ğŸš€ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ\n\n- ã‚·ã‚¹ãƒ†ãƒ æœ€é‡è¦æ©Ÿèƒ½ã®å‹•ä½œä¿è¨¼\n- çµ±è¨ˆãƒ‡ãƒ¼ã‚¿è¨ˆç®—ã®æ­£ç¢ºæ€§ç¢ºä¿\n- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã®ä¿¡é ¼æ€§å‘ä¸Š\n- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª\n\n**Priority**: Critical\n**Impact**: ã‚·ã‚¹ãƒ†ãƒ ä¸­æ ¸æ©Ÿèƒ½ã®ä¿¡é ¼æ€§ç¢ºä¿\n**Component**: Services\n**Files**: `src/lib/services/StatsService.ts`\n\nğŸ¤– Generated with [Claude Code](https://claude.ai/code)",
  "user": {
    "login": "nyasuto",
    "id": 17446383,
    "node_id": "MDQ6VXNlcjE3NDQ2Mzgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/17446383?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nyasuto",
    "html_url": "https://github.com/nyasuto",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 8910603242,
      "node_id": "LA_kwDOPJEskc8AAAACEx0D6g",
      "name": "priority: critical",
      "description": "Critical priority tasks",
      "color": "d73a4a",
      "default": false
    },
    {
      "id": 8910603599,
      "node_id": "LA_kwDOPJEskc8AAAACEx0FTw",
      "name": "type: test",
      "description": "Test related tasks",
      "color": "f9d71c",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-07-09T23:57:59Z",
  "updated_at": "2025-07-10T00:11:43Z",
  "closed_at": "2025-07-10T00:11:43Z",
  "author_association": "OWNER",
  "active_lock_reason": null,
  "html_url": "https://github.com/nyasuto/beaver/issues/96",
  "url": "https://api.github.com/repos/nyasuto/beaver/issues/96",
  "repository_url": "https://api.github.com/repos/nyasuto/beaver",
  "labels_url": "https://api.github.com/repos/nyasuto/beaver/issues/96/labels{/name}",
  "comments_url": "https://api.github.com/repos/nyasuto/beaver/issues/96/comments",
  "events_url": "https://api.github.com/repos/nyasuto/beaver/issues/96/events"
}