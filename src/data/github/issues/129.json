{
  "id": 3219143047,
  "node_id": "PR_kwDOPJEskc6eS743",
  "number": 129,
  "title": "feat: フォールバックデータ時のメトリクス表示改善",
  "body": "## 概要\n\nフォールバックデータ使用時のメトリクス表示を改善し、ユーザーに明確なフィードバックを提供する。\n\n## 変更内容\n\n### 1. フォールバックデータ表示の改善\n- `-1` 値を `N/A` として表示するように StatCard.astro を更新\n- データソースに応じた適切なフォールバック処理を実装\n\n### 2. 静的データメッセージの削除\n- IssueStats.astro から不要な静的データメッセージブロックを削除\n- RecentActivity.astro から不要な静的データメッセージブロックを削除\n- `npm run fetch-data` 実行を促すメッセージを除去\n\n### 3. メトリクス計算の改善\n- `urgentIssues` の計算でフォールバックデータを適切に検出\n- `recentActivity` でnull coalescing演算子(`??`)を使用して-1値を保持\n- StatsService の既存フォールバック機能を活用\n\n## テスト\n\n- 全テスト成功: 1843 tests passed\n- TypeScript エラーなし\n- ESLint/Prettier チェック通過\n\n## 技術的詳細\n\n### StatCard.astro の改善\n```astro\n<p class=\"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white mt-1\">\n  {value === -1 ? 'N/A' : value}\n</p>\n```\n\n### IssueStats.astro の改善\n```typescript\n// フォールバックデータを適切に検出\nconst urgentIssues = stats && stats.meta.source \\!== 'fallback' \n  ? stats.priority.critical + stats.priority.high \n  : -1;\n\n// null coalescing演算子で-1値を保持\nconst recentActivity = stats?.recentActivity.thisWeek ?? -1;\n```\n\nCloses #127",
  "user": {
    "login": "nyasuto",
    "id": 17446383,
    "node_id": "MDQ6VXNlcjE3NDQ2Mzgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/17446383?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nyasuto",
    "html_url": "https://github.com/nyasuto",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-07-10T12:22:28Z",
  "updated_at": "2025-07-10T12:43:50Z",
  "closed_at": "2025-07-10T12:43:48Z",
  "author_association": "OWNER",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/nyasuto/beaver/pulls/129",
    "html_url": "https://github.com/nyasuto/beaver/pull/129",
    "diff_url": "https://github.com/nyasuto/beaver/pull/129.diff",
    "patch_url": "https://github.com/nyasuto/beaver/pull/129.patch"
  },
  "html_url": "https://github.com/nyasuto/beaver/pull/129",
  "url": "https://api.github.com/repos/nyasuto/beaver/issues/129",
  "repository_url": "https://api.github.com/repos/nyasuto/beaver",
  "labels_url": "https://api.github.com/repos/nyasuto/beaver/issues/129/labels{/name}",
  "comments_url": "https://api.github.com/repos/nyasuto/beaver/issues/129/comments",
  "events_url": "https://api.github.com/repos/nyasuto/beaver/issues/129/events"
}