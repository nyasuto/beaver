{
  "id": 3221166668,
  "node_id": "PR_kwDOPJEskc6eZ179",
  "number": 159,
  "title": "improve: おすすめタスクの説明文を100文字に短縮",
  "body": "## 概要\n\nおすすめタスクの説明文表示を改善し、改行区切りではなく100文字で切り取るように変更しました。これにより、タスクカードでより読みやすい短い説明文が表示されます。\n\n## 変更内容\n\n### 🔧 修正内容\n- **タスク説明文の長さ**: 150文字から100文字に短縮\n- **表示方法**: 改行区切り（`extractFirstParagraph`）から文字数制限（`markdownToPlainText`）に変更\n- **処理の統一**: `generateTaskDescription`と`getFallbackRecommendations`の両方で統一された処理を実装\n\n### 📁 変更ファイル\n- `src/lib/services/TaskRecommendationService.ts`: \n  - `generateTaskDescription`: `extractFirstParagraph` → `markdownToPlainText`使用\n  - `getFallbackRecommendations`: 同様に100文字制限に統一\n  - 不要な`extractFirstParagraph`インポートを削除\n- `src/lib/services/__tests__/TaskRecommendationService.test.ts`: テストのモックを更新\n\n### ✅ 改善効果\n- より統一された短い説明文でタスクカードが読みやすくなる\n- Markdownフォーマットを適切にプレーンテキストに変換\n- UIの表示一貫性が向上\n\n## テスト\n\n- [x] 既存のテストスイートが正常に通過\n- [x] TaskRecommendationServiceのテストが正常に動作\n- [x] ビルドプロセスが正常に完了\n- [x] 品質チェック（lint、format、type-check）が通過\n\n## 技術的詳細\n\n**変更前**:\n```typescript\n// 改行で区切って最初の段落を取得\nconst firstParagraph = extractFirstParagraph(body);\nconst truncated = truncateMarkdown(firstParagraph, 150);\n```\n\n**変更後**:\n```typescript\n// プレーンテキストに変換して100文字で切り取り\nconst plainText = markdownToPlainText(body);\nconst truncated = truncateMarkdown(plainText, 100);\n```\n\nこの変更により、より簡潔で読みやすいタスク説明文が表示されるようになります。",
  "user": {
    "login": "nyasuto",
    "id": 17446383,
    "node_id": "MDQ6VXNlcjE3NDQ2Mzgz",
    "avatar_url": "https://avatars.githubusercontent.com/u/17446383?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nyasuto",
    "html_url": "https://github.com/nyasuto",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": 0,
  "created_at": "2025-07-11T01:26:40Z",
  "updated_at": "2025-07-11T01:29:01Z",
  "closed_at": "2025-07-11T01:29:00Z",
  "author_association": "OWNER",
  "active_lock_reason": null,
  "draft": false,
  "pull_request": {
    "url": "https://api.github.com/repos/nyasuto/beaver/pulls/159",
    "html_url": "https://github.com/nyasuto/beaver/pull/159",
    "diff_url": "https://github.com/nyasuto/beaver/pull/159.diff",
    "patch_url": "https://github.com/nyasuto/beaver/pull/159.patch"
  },
  "html_url": "https://github.com/nyasuto/beaver/pull/159",
  "url": "https://api.github.com/repos/nyasuto/beaver/issues/159",
  "repository_url": "https://api.github.com/repos/nyasuto/beaver",
  "labels_url": "https://api.github.com/repos/nyasuto/beaver/issues/159/labels{/name}",
  "comments_url": "https://api.github.com/repos/nyasuto/beaver/issues/159/comments",
  "events_url": "https://api.github.com/repos/nyasuto/beaver/issues/159/events"
}